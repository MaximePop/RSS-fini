<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ressources en Humanité Numérique</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/rss-parser/dist/rss-parser.min.js"></script>
  <script src="https://www.zotero.org/support/dev/client_api/citationstyleresults.js"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>

body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-bar,h1,button {font-family: "Montserrat", sans-serif}
.fa-anchor,.fa-coffee {font-size:200px}

.hidden {
  display: none;
}


@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Autres styles CSS... */


  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }


  .container {
    width: 100%;
    background-color: #fff;
    /* White background color */
    transition: transform 0.3s;
  }



  th {
    text-align: left;
  }

  .category-title {
    font-weight: bold;
    /* Make the category title bold */
    margin: 10px 0;
    /* Add some margin below the category title */
    color: #000;
    /* Black text color for the category title */
  }

  

  .image-container {
    display: flex;
    justify-content: center;
    margin: 20px 0;
  }

  .image-container img {
    max-width: 100%;
    height: auto;
  }


  table {
    border-collapse: collapse;
    width: 100M;
    margin: 0 auto;
  }

  td {
    border: 1px solid black;
    text-align: center;
    padding: 5px;
    width: 300px;
    height: 100px;
  }


  .button {
    display: inline-block;
    border-radius: 4px;
    background-color: transparent;
    border: none;
    color: #FFFFFF;
    text-align: center;
    font-size: 20px;
    padding: 10px;
    width: 200px;
    transition: all 0.5s;
    cursor: pointer;
    margin: 5px;
    position: relative;
  }

  .button span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-weight: bold;
  }


  .button span:after {
    position: absolute;
    opacity: 0;
    top: 0;
    right: -20px;
    transition: opacity 0.5s;
    /* Add transition for smooth fade-in effect */
  }

  .button:hover span:after {
    opacity: 1;
    right: 0;
  }

  .button:hover span {
    padding-right: 25px;
  }


  .button img {
    transition: transform 0.3s;

  }

  .button:hover img {
    transform: scale(1.1);
  }

  ul#itemList1 {
    color: white !important;
  }


  h3 {
    color: white;
    font-size: 20px;
    transition: transform 0.3s;
    font-weight: normal;
    margin-bottom: 20px;
    font-family: "Fuse Regular", sans-serif;
    /* Appliquer la police Fuse Regular */

  }

  /* Effet d'hover */
  h3:hover {
    transform: scale(1.1);
  }

  ul {
    list-style-type: none;
    padding: 0;
  }

  li {
    margin-bottom: 10px;
    font-size: 14px;
    color: black;
  }

  input[type="text"] {
    padding: 5px;
    font-size: 14px;
    margin-right: 10px;
  }

  button {
    padding: 5px 10px;
    font-size: 14px;
  }



  h3.link {
    margin: 0;

  }


  .table-cell {
    padding: 10px;
    transition: background-color 0.3s;
  }

  .table-cell:hover {
    background-color: white;
    border: 2px solid #FF8C22;
  }

  .table-cell:hover h3 {
    color: black;
  }

  .table-cell .subheading {
    color: white;
  }

  .table-cell:hover .subheading {
    color: black;
  }

  #close-icon {
    font-size: 24px;
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
  }



  #results {
    font-family: Arial, sans-serif;
    font-size: 14px;
    color: black;
  }

  #keyword-cloud {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    color: black;
  }

  .keyword {
  display: inline-block;
  color: black;
  padding: 6px 8px;
  text-decoration: none;
  transition: background-color 0.3s ease;
  font-family: "Fuse Regular", sans-serif;
  text-decoration-color: black;
}


.keyword:hover {
  background-color: #D3D3D3;
  color: white;
  text-decoration-color: currentColor;
  text-decoration: none;
}




  .pagination1 {
    /* display: flex; */
    justify-content: center;
    margin-top: 20px;
  }

  .pagination1 button {
    margin: 0 5px;
  }

  .page-number {
    color: #000;
  }

  .navbar {
      margin-bottom: 40px;
    }

    .navbar a {
  float: left;
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  transition: background-color 0.3s ease;
  font-family: "Fuse Regular", sans-serif;
}
  
.navbar a:hover {
      background-color: #D3D3D3;
    }

    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
    }
    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }
    .image-container {
      display: flex;
      justify-content: space-between; /* Align images on the same line */
    }
    .image-container img {
      max-width: 100%;
      height: auto;
    }

    a {
      text-decoration: none;
      font-weight: normal;
    }

    a:hover {
      font-weight: bold;
    }

   


  .container {
  background-color: lightgrey;
  padding: 16px;
}

.grid-container {
  display: grid;
  grid-template-columns: 1fr;
  grid-gap: 16px;
}

.article-title {
    color: #0a6d00;
    /* Dark green color for the article title */
    text-decoration: none;
    transition: color 0.3s;
  }

  .article-title:hover {
    color: #076a00;
    /* Darker green color on hover */
  }

  .navbar {
      margin-bottom: 40px;
    }

    .popup-border-red {
border: 10px solid red;
}

.popup-border-orange {
border: 10px solid orange;
}

.popup-border-yellow {
border: 10px solid yellow;
}

.popup-border-darkhaki {
border: 10px solid darkkhaki;
}

.popup-border-darkolivegreen {
border: 10px solid darkolivegreen;
}

.popup-border-darkcyan {
border: 10px solid darkcyan;
}

.popup-border-lightslategray {
border: 10px solid lightslategray;
}

.popup-border-lightsalmon {
border: 10px solid lightsalmon;
}

.popup-border-lightseagreen {
border: 10px solid lightseagreen;
}

.popup-border-lightskyblue {
border: 10px solid lightskyblue;
}

.popup-border-blueviolet {
border: 10px solid blueviolet;
}

.popup-border-magenta {
border: 10px solid magenta;
}

.popup-border-lightcoral {
border: 10px solid lightcoral;
}

.popup-border-royalblue {
border: 10px solid royalblue;
}

.popup-border-orangered {
border: 10px solid orangered;
}

.popup-border-forestgreen {
border: 10px solid forestgreen;
}

.popup-border-purple {
border: 10px solid purple;
}

.popup-border-gray {
border: 10px solid gray;
}

.popup-border-dodgerblue {
border: 10px solid dodgerblue;
}

.popup-border-pink {
border: 10px solid pink;
}

.popup-border-darkred {
border: 10px solid darkred;
}

.popup-border-gold {
border: 10px solid gold;
}

.popup-border-teal {
border: 10px solid teal;
}

.popup-border-limegreen {
border: 10px solid teal;
}


</style>


</head>
<body>
<div class="navbar">
  <a href="accueil.html" target="_blank" >Accueil</a>
  <div class="dropdown">
    <a href="index.html" class="dropbtn" target="_blank">Ressources sur les Humanités Numériques</a>
  </div>

  <div class="dropdown">
    <a href="digit_hum.html" class="dropbtn">Digit_Hum</a>
    <div class="dropdown-content">
      <a href="https://digithum.huma-num.fr/" target="_blank">Présentation</a>
      <a href="https://digithum.huma-num.fr/atelier/" target="_blank">Ateliers</a>
      <a href="https://digithum.huma-num.fr/enquete/" target="_blank">Enquête</a>
      <a href="https://digithum.huma-num.fr/portraits/" target="_blank">Portraits</a>
      <a href="https://digithum.huma-num.fr/ressources/" target="_blank">Ressources</a>
      <a href="https://digithum.huma-num.fr/portfolio/" target="_blank">Portfolio</a>
    </div>
  </div>
  
  <div class="dropdown">
    <a href="eveille.html" class="dropbtn">Eveille</a>
    <div class="dropdown-content">
      <a href="https://eveille.hypotheses.org/presentation-du-projet-eveille" target="_blank">Présentation</a>
      <a href="https://eveille.hypotheses.org/formation-humanites-numeriques" target="_blank">Formation</a>
      <a href="https://eveille.hypotheses.org/manifestations" target="_blank">Manifestations et Ateliers</a>
      <a href="https://eveille.hypotheses.org/projets-en-cours" target="_blank">Projets</a>
      <a href="https://eveille.hypotheses.org/ressources-2" target="_blank">Ressources</a>
      <a href="https://eveille.hypotheses.org/matiere-a-penser" target="_blank">Matière à penser</a>
    </div>


  </div>
  
  <div class="grid-container">
    <div class="container">
      <h1 class="title-hover" style="font-weight: bold;">Ressources sur les Humanités Numériques.</h1>
      <h1 class="title-hover" style="font-weight: bold; font-size: 12px;">Site créé par Maxime Popineau, étudiant en 2ème année de Master Humanité Numérique, en juillet 2023.</h1>
    </div>
  </div>
   
  <div class="w3-row-padding w3-white w3-padding-64 w3-container">
    <div class="w3-content">
      <div class="w3-twothird">
        <h1 style="font-weight: bold;">Catégorisation des ressources par mots-clés.</h1>
        <h5 class="w3-padding-32">Les ressources sont disponibles sous forme de pop-up lorsque vous passez votre souris sur le nom de la catégorie. Il est nécessaire d'autoriser les pop-ups dans votre navigateur pour obtenir les ressources dans le tableau. </h5>
        <p class="w3-text-grey">La liste des mots-clés est une liste commune à Digit_Hum et à Eveille provenant de la bibliothèque commune Zotero.</p>

        <table id="table">
          <tr>
            <td class="table-cell" style="background-color: lightskyblue; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList23', 'popup-border-lightskyblue')" onmouseover="changeColor(this)">Acquisition</h3>
              <ul id="itemList23" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: gold; color: white;">
              <h3 class="link" onclick="openLinksInPopup('itemList2', 'popup-border-gold')" onmouseover="changeColor(this)">Analyse</h3>
              <ul id="itemList2" style="display: none;">
                <li><h1>Analyse du web</h1></li>
                <ul id="itemList3"></ul>
                <li><h1>Analyse et traitement sémantique</h1></li>
                <ul id="itemList4"></ul>
              </ul>
            </td>
            <td class="table-cell" style="background-color: darkcyan; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList27', 'popup-border-darkcyan')" onmouseover="changeColor(this)">Art et culture</h3>
              <ul id="itemList27" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: orange; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList6', 'popup-border-orange')" onmouseover="changeColor(this)">Bibliothèque numérique</h3>
              <ul id="itemList6" style="display: none;"></ul>
            </td>
          </tr>
          <tr>
            <td class="table-cell" style="background-color: #029980; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList11', 'popup-border-popup-border-tealgreen')" onmouseover="changeColor(this)">Cartographie et visualisation</h3>
              <ul id="itemList11" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: red; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList8', 'popup-border-red')" onmouseover="changeColor(this)">Diffusion</h3>
              <ul id="itemList8" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: darkred; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList9', 'popup-border-darkred')" onmouseover="changeColor(this)">Ecosophie</h3>
              <ul id="itemList9" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: pink; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList10', 'popup-border-pink')" onmouseover="changeColor(this)">Ecriture scientifique</h3>
              <ul id="itemList10" style="display: none;"></ul>
            </td>
          </tr>
          <tr>
            <td class="table-cell" style="background-color: dodgerblue; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList11', 'popup-border-dodgerblue')" onmouseover="changeColor(this)">Edition numérique</h3>
              <ul id="itemList11" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: teal; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList13', 'popup-border-teal')" onmouseover="changeColor(this)">Enseignement, formation et recherche</h3>
              <ul id="itemList13" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: limegreen; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList5', 'popup-border-limegreen')" onmouseover="changeColor(this)">Environnement collaboratif</h3>
              <ul id="itemList5" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: blueviolet; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList15', 'popup-border-blueviolet')" onmouseover="changeColor(this)">Fondamentaux</h3>
              <ul id="itemList15" style="display: none;"></ul>
            </td>
          </tr>
          <tr>
            <td class="table-cell" style="background-color: purple; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList14', 'popup-border-purple')" onmouseover="changeColor(this)">Histoire et société</h3>
              <ul id="itemList14" style="display: none;"></ul>
              </td>
              <td class="table-cell" style="background-color: forestgreen; color: white; padding: 10px;">
                <h3 class="link" onclick="openLinksInPopup('itemList15', 'popup-border-forestgreen')" onmouseover="changeColor(this)">Ingénierie</h3>
                <ul id="itemList15" style="display: none;"></ul>
              </td>

            </td>
            <td class="table-cell" style="background-color: lightsalmon; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList25', 'popup-border-lightsalmon')" onmouseover="changeColor(this)">Langage informatique</h3>
              <ul id="itemList25" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: orangered; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList16', 'popup-border-orangered')" onmouseover="changeColor(this)">Manifestation</h3>
              <ul id="itemList16" style="display: none;"></ul>
            </td>
          </tr>
          <tr>
            <td class="table-cell" style="background-color: lightslategray; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList26', 'popup-border-lightslategray')" onmouseover="changeColor(this)">Numésthésie</h3>
              <ul id="itemList26" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: magenta; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList21', 'popup-border-magenta')" onmouseover="changeColor(this)">Ressources</h3>
              <ul id="itemList21" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: royalblue; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList17', 'popup-border-royalblue')" onmouseover="changeColor(this)">Science ouverte</h3>
              <ul id="itemList17" style="display: none;">
                <li><h1>Base de données</h1></li>
                <ul id="itemList18"></ul>
                <li><h1>Stockage/Archivage</h1></li>
                <ul id="itemList19"></ul>
              </ul>
            </td>
            <td class="table-cell" style="background-color: lightseagreen; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList24', 'popup-border-lightseagreen')" onmouseover="changeColor(this)">Traitement automatique des langues</h3>
              <ul id="itemList24" style="display: none;"></ul>
            </td>
          </tr>
          <td class="table-cell" style="background-color: gray; color: white; padding: 10px;">
            <h3 class="link" onclick="openLinksInPopup('itemList12', 'popup-border-gray')" onmouseover="changeColor(this)">Transcription</h3>
            <ul id="itemList12" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: darkolivegreen; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList28','popup-border-darkolivegreen')" onmouseover="changeColor(this)"></h3>
              <ul id="itemList28" style="display: none;"></ul>
            </td>
            <td class="table-cell" style="background-color: darkkhaki; color: white; padding: 10px;">
              <h3 class="link" onclick="openLinksInPopup('itemList29','popup-border-darkhaki')" onmouseover="changeColor(this)"></h3>
              <ul id="itemList29" style="display: none;"></ul>
              </td>
              <td class="table-cell" style="background-color: lightcoral; color: white; padding: 10px;">
                <h3 class="link" onclick="openLinksInPopup('itemList20', 'popup-border-lightcoral')" onmouseover="changeColor(this)">Veille</h3>
                <ul id="itemList20" style="display: none;"></ul>
              </td>
          
          
              </td>
          </tr>
        </table>
        
        <div class="w3-content">
          <div class="w3-twothird">
            <h1 style="font-weight: bold;">Rechercher des mots-clés dans les titres</h1>
            <h5 class="w3-padding-32">La barre de recherche vous permet de chercher des mots-clés dans le titre des ressources présentes dans la bibliothèque Zotero.</h5>
      
            <p class="w3-text-grey"> L'objectif est d'indexer les ressources pour qu'elles soient le plus facilement accessible. </p>
            <h1>Barre de recherche</h1>
            <input type="text" id="searchInput" placeholder="Rechercher par titre">
            <button onclick="searchItems()">Rechercher</button>
            <h1>Résultats</h1>
            <ul id="myItemList1"></ul>
            <div class="pagination1">
              <button onclick="updatePage('previous')">Précédent</button>
              <span id="currentPage"></span>
              <button onclick="updatePage('next')">Suivant</button>
            </div>

              <h1>Mots-clés</h1>
              <div id="keyword-cloud"></div>


    </div>
  </div>
</div>
</div>
        
    </div>
  </div>
  </div>


<div>


        
        


        <div class="w3-row-padding w3-light-grey w3-padding-64 w3-container">
        <div class="w3-content">
          <div class="w3-twothird">
            <h1 style="font-weight: bold;">Tags de la collection Zotero</h1>
            <h5 class="w3-padding-32">Les tags sont les tags présents dans la collection Zotero. Ils permettent à l'utilisateur de trouver des ressources par thématiques.</h5>
      
            <p class="w3-text-grey"> L'objectif est d'indexer les ressources pour qu'elles soient le plus facilement accessible. </p>
            <div id="tagList"></div>
            <h1>Résultats</h1>
            <ul id="myItemList"></ul>

</div>

      <script>
        const parser = new RSSParser(); // Initialize the RSS Parser

        function generateRSS() {
          const feedData = [
            {
              category: 'Jardin de la poésie',
              url: 'https://versunjardin.hypotheses.org/feed'
            },
            {
              category: 'La roue à livres',
              url: 'https://rouealivres.hypotheses.org/feed'
            },
            {
              category: 'Olio',
              url: 'https://olio.hypotheses.org/feed'
            },
            {
              category: 'Estrades',
              url: 'https://estrades.hypotheses.org/feed'
            }
          ];

          const rssArticles1 = document.getElementById('rssArticles1');
          const rssArticles2 = document.getElementById('rssArticles2');
          const rssArticles3 = document.getElementById('rssArticles3');
          const rssArticles4 = document.getElementById('rssArticles4');

          const fetchAndProcess = (category, url, articlesContainer) => {
            parser.parseURL(url, (err, feed) => {
              if (err) {
                articlesContainer.innerHTML = 'Erreur lors du chargement du flux RSS.';
                return;
              }

              const items = feed.items;

              if (items.length > 0) {
                const rssItems = items.map(item => {
                  const itemTitle = item.title;
                  const itemLink = item.link;
                  return `
                        <li>
                            <a href="${itemLink}" class="article-title">${itemTitle}</a>
                        </li>
                    `;
                }).join('');
                articlesContainer.innerHTML = `<ul>${rssItems}</ul>`;
              } else {
                articlesContainer.innerHTML = 'Aucun article trouvé.';
              }
            });
          };

          feedData.forEach(feed => {
            switch (feed.category) {
              case 'Jardin de la poésie':
                fetchAndProcess(feed.category, feed.url, rssArticles1);
                break;
              case 'La roue à livres':
                fetchAndProcess(feed.category, feed.url, rssArticles2);
                break;
              case 'Olio':
                fetchAndProcess(feed.category, feed.url, rssArticles3);
                break;
              case 'Estrades':
                fetchAndProcess(feed.category, feed.url, rssArticles4);
                break;
            }
          });
        }

        generateRSS();

        function searchArticles() {
          const keyword = document.getElementById('keywordInput').value.toLowerCase();
          const searchResults = [];

          const processSearchResults = (category, articlesContainer) => {
            const articles = articlesContainer.getElementsByTagName('li');
            for (let i = 0; i < articles.length; i++) {
              const article = articles[i];
              const articleTitle = article.getElementsByTagName('a')[0].textContent.toLowerCase();
              const articleLink = article.getElementsByTagName('a')[0].getAttribute('href');
              if (articleTitle.includes(keyword)) {
                searchResults.push({
                  category: category,
                  title: articleTitle,
                  link: articleLink
                });
              }
            }
          };

          const rssArticlesContainers = [
            { category: 'Jardin de la poésie', container: rssArticles1 },
            { category: 'La roue à livres', container: rssArticles2 },
            { category: 'Olio', container: rssArticles3 },
            { category: 'Estrades', container: rssArticles4 }
          ];

          rssArticlesContainers.forEach(rssContainer => {
            processSearchResults(rssContainer.category, rssContainer.container);
          });

          displaySearchResults(searchResults);
        }

        function displaySearchResults(results) {
          const searchResultsContainer = document.getElementById('searchResults');
          let searchResultsHTML = '';

          if (results.length > 0) {
            searchResultsHTML += '<ul>';
            results.forEach(result => {
              searchResultsHTML += `
                <li>
                    <span class="category">${result.category}</span>:
                    <a href="${result.link}" class="article-title">${result.title}</a>
                </li>
            `;
            });
            searchResultsHTML += '</ul>';
          } else {
            searchResultsHTML = 'Aucun résultat trouvé.';
          }

          searchResultsContainer.innerHTML = searchResultsHTML;

        }


        function fetchZoteroCollection(collectionUrl, targetElementId) {
  fetch(collectionUrl)
    .then(response => response.json())
    .then(data => {
      data.forEach(item => {
        var title = item.data.title;
        var url = item.data.url;

        var listItem = document.createElement('li');
        var link = document.createElement('a');
        link.href = url;
        link.textContent = title;
        link.target = '_blank'; // Open the link in a new tab
        listItem.appendChild(link);

        document.getElementById(targetElementId).appendChild(listItem);
      });
    })
    .catch(error => console.log(error));
}


        function createSubCollection(parentCollectionId, parentCollectionKey, subCollectionTitle) {
          var apiKey = 'yQraJQogHA89BHu3VJBKXLha';  // Replace with your Zotero API key

          var apiUrl = 'https://api.zotero.org/users/9668586/collections?key=' + apiKey;
          var userID = '9668586';  // Replace with your Zotero user ID

          var data = {
            'name': subCollectionTitle,
            'parentCollection': parentCollectionId
          };

          fetch(apiUrl.replace('9668586', userID), {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          })
            .then(response => response.json())
            .then(subCollection => {
              console.log('Subcollection created:', subCollection);
            })
            .catch(error => console.log(error));
        }

        var apiKey = 'yQraJQogHA89BHu3VJBKXLha';  // Replace with your Zotero API key

        var collectionUrls = [
          'https://api.zotero.org/users/9668586/collections/8PHW6BAG/items/top?v=3&key=' + apiKey,  // Analyse et traitement sémantique
          'https://api.zotero.org/users/9668586/collections/SMTFXD66/items/top?v=3&key=' + apiKey,  // Analyse du web (subcollection)
          'https://api.zotero.org/users/9668586/collections/NUFHR9J3/items/top?v=3&key=' + apiKey,  // Analyse et traitement sémantique (subcollection)
          'https://api.zotero.org/users/9668586/collections/BNWSQQWJ/items/top?v=3&key=' + apiKey,  // Annotation collaborative
          'https://api.zotero.org/users/9668586/collections/7FUX4CMB/items/top?v=3&key=' + apiKey,  // Bibliothèque numérique
          'https://api.zotero.org/users/9668586/collections/N3NVZA75/items/top?v=3&key=' + apiKey,  // Cartographie et visualisation
          'https://api.zotero.org/users/9668586/collections/8E8H4TF7/items/top?v=3&key=' + apiKey,  // Diffusion
          'https://api.zotero.org/users/9668586/collections/22Z66JU7/items/top?v=3&key=' + apiKey,  // Ecosophie
          'https://api.zotero.org/users/9668586/collections/AS663FZC/items/top?v=3&key=' + apiKey,  // Ecriture
          'https://api.zotero.org/users/9668586/collections/2Z8DVDUV/items/top?v=3&key=' + apiKey,  // Edition numérique
          'https://api.zotero.org/users/9668586/collections/BRXJDSG4/items/top?v=3&key=' + apiKey,  // Transcription
          'https://api.zotero.org/users/9668586/collections/ZX4H5G27/items/top?v=3&key=' + apiKey,  // Enseignement, formation, recherche
          'https://api.zotero.org/users/9668586/collections/284A3JK5/items/top?v=3&key=' + apiKey,  // Histoire philosophie controverse
          'https://api.zotero.org/users/9668586/collections/XVHABQ5P/items/top?v=3&key=' + apiKey,  // Ingénierie
          'https://api.zotero.org/users/9668586/collections/BHDKDGB5/items/top?v=3&key=' + apiKey,  // Manifestations
          'https://api.zotero.org/users/9668586/collections/5BCUGMKP/items/top?v=3&key=' + apiKey,  // Sciences ouvertes
          'https://api.zotero.org/users/9668586/collections/UU2DPQJS/items/top?v=3&key=' + apiKey,  // Base de données (subcollection)
          'https://api.zotero.org/users/9668586/collections/N8GGXUG6/items/top?v=3&key=' + apiKey,  // Stockage archivage (subcollection)
          'https://api.zotero.org/users/9668586/collections/8WRX2F9V/items/top?v=3&key=' + apiKey,   // Veille
          'https://api.zotero.org/users/9668586/collections/TMQWC3J5/items/top?v=3&key=' + apiKey ,  // Ressources
          'https://api.zotero.org/users/9668586/collections/GJ6CVBBP/items/top?v=3&key=' + apiKey ,  // Fondamentaux
          'https://api.zotero.org/users/9668586/collections/EP6WPBE5/items/top?v=3&key=' + apiKey ,  // Acquisition
          'https://api.zotero.org/users/9668586/collections/EHMCV6UU/items/top?v=3&key=' + apiKey ,  // Numesthesie
          'https://api.zotero.org/users/9668586/collections/2FDQBJPV/items/top?v=3&key=' + apiKey ,  // Art et culture
          'https://api.zotero.org/users/9668586/collections/SEKUPE78/items/top?v=3&key=' + apiKey ,  // Traitement automatique des langues
          'https://api.zotero.org/users/9668586/collections/ZV9TJ8BE/items/top?v=3&key=' + apiKey ,  // Langage informatique
          'https://api.zotero.org/users/9668586/collections/PED2ABAM/items/top?v=3&key=' + apiKey ,  // test1
          'https://api.zotero.org/users/9668586/collections/IFAV3I23/items/top?v=3&key=' + apiKey ,  // test2
          'https://api.zotero.org/users/9668586/collections/947PZD8A/items/top?v=3&key=' + apiKey ,  // test3

          
  
          
        ];

        collectionUrls.forEach((collectionUrl, index) => {
          fetchZoteroCollection(collectionUrl, 'itemList' + (index + 2));
        });

        document.addEventListener("DOMContentLoaded", function () {
          const imageContainers = document.querySelectorAll(".image-container");

          imageContainers.forEach(imageContainer => {
            imageContainer.addEventListener("mouseover", function () {
              this.classList.add("hovered");
            });

            imageContainer.addEventListener("mouseout", function () {
              this.classList.remove("hovered");
            });
          });
        });

        window.addEventListener('DOMContentLoaded', function () {
          var itemListIds = ['itemList1', 'itemList2', 'itemList3', 'itemList4', 'itemList5', 'itemList6', 'itemList7', 'itemList8', 'itemList9', 'itemList10', 'itemList11', 'itemList12', 'itemList13', 'itemList14', 'itemList15', 'itemList16', 'itemList17', 'itemList18', 'itemList19', 'itemList20', 'itemList21', 'itemList22', 'itemList23', 'itemList24', 'itemList25', 'itemList26', 'itemList27', 'itemList28', 'itemList29'];
          for (var i = 0; i < itemListIds.length; i++) {
            var itemList = document.getElementById(itemListIds[i]);
            if (itemList) {
              itemList.addEventListener('click', function (event) {
                var target = event.target;
                if (target.tagName === 'A') {
                  target.setAttribute('target', '_blank');
                }
              });
            }
          }
        });

        var currentPopup = null; // Variable to store the reference to the current pop-up window

function openLinksInPopup(itemListId, cellColorClass) {
  var itemList = document.getElementById(itemListId).innerHTML;

  // Create a div element to display the content of the links
  var popupContent = document.createElement('div');
  popupContent.innerHTML = itemList;

  // Add styles to the content div
  popupContent.style.backgroundColor = '#fff'; // Container background color: white
  popupContent.style.color = '#000'; // Text color: black
  popupContent.style.padding = '10px'; // Add padding

  // Create a div for the pop-up window
  var popupWindow = document.createElement('div');
  popupWindow.style.position = 'fixed';
  popupWindow.style.top = '50%';
  popupWindow.style.left = '0';
  popupWindow.style.transform = 'translate(0, -50%)';
  popupWindow.style.width = 'auto';
  popupWindow.style.maxWidth = '80%';
  popupWindow.style.maxHeight = '80%';
  popupWindow.style.backgroundColor = '#fff'; // Set the background color to white
  popupWindow.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.2)'; // Add a box shadow for a visual effect
  popupWindow.style.overflowY = 'auto'; // Enable vertical scrolling if needed
  popupWindow.style.zIndex = '999'; // Set a higher z-index for overlapping other elements
  popupWindow.classList.add(cellColorClass); // Add the color class for the border

  // Create a close button
  var closeButton = document.createElement('button');
  closeButton.innerHTML = 'x';
  closeButton.style.position = 'absolute';
  closeButton.style.top = '10px';
  closeButton.style.right = '10px';
  closeButton.style.padding = '5px';
  closeButton.style.backgroundColor = 'transparent';
  closeButton.style.border = 'none';
  closeButton.style.fontSize = '20px';
  closeButton.style.color = '#000';
  closeButton.style.cursor = 'pointer';

  // Add the close button to the pop-up window
  popupWindow.appendChild(closeButton);

  // Add the popup content directly to the pop-up window
  popupWindow.appendChild(popupContent);

  // Add the pop-up window to the main page
  document.body.appendChild(popupWindow);

  // Add a click event listener to the close button
  closeButton.addEventListener('click', function () {
    // Remove the pop-up window from the main page
    document.body.removeChild(popupWindow);
    // Reset the currentPopup variable
    currentPopup = null;
  });

  // Make the pop-up window draggable
  dragElement(popupWindow);

  // Close the previous pop-up if it exists
  if (currentPopup) {
    document.body.removeChild(currentPopup);
  }

  // Store the reference to the current pop-up
  currentPopup = popupWindow;

  // Function to make an element draggable
  function dragElement(element) {
    var pos1 = 0,
      pos2 = 0,
      pos3 = 0,
      pos4 = 0;
    element.onmousedown = dragMouseDown;

    function dragMouseDown(e) {
      e = e || window.event;
      e.preventDefault();
      pos3 = e.clientX;
      pos4 = e.clientY;
      document.onmouseup = closeDragElement;
      document.onmousemove = elementDrag;
    }

    function elementDrag(e) {
      e = e || window.event;
      e.preventDefault();
      pos1 = pos3 - e.clientX;
      pos2 = pos4 - e.clientY;
      pos3 = e.clientX;
      pos4 = e.clientY;
      element.style.top = element.offsetTop - pos2 + 'px';
      element.style.left = element.offsetLeft - pos1 + 'px';
    }

    function closeDragElement() {
      document.onmouseup = null;
      document.onmousemove = null;
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    // Add click event listeners to each hyperlink in the pop-up content
    var links = popupContent.querySelectorAll('a');
    links.forEach(function (link) {
      link.addEventListener('click', function (event) {
        event.preventDefault(); // Prevent the default link behavior
        var url = link.getAttribute('href'); // Get the URL from the href attribute
        window.open(url, '_blank'); // Open the link in a new tab
      });
    });

    // Add event listener for category links
    var categories = document.querySelectorAll('.link');
    categories.forEach(function (category) {
      category.addEventListener('click', function () {
        var itemListId = this.getAttribute('data-itemlist');
        openLinksInPopup(itemListId, cellColorClass);
      });
    });
  });
}



        function changeColor(element) {
          if (element.style.color === 'white') {
            element.style.color = 'black';
          } else {
            element.style.color = 'white';
          }
        }


        document.addEventListener('DOMContentLoaded', function () {
          var categories = document.querySelectorAll('.link');
          categories.forEach(function (category) {
            category.addEventListener('click', function () {
              var itemListId = this.getAttribute('data-itemlist');
              openLinksInNewTab(itemListId);
            });
          });
        });

        // Fetches the Zotero collection data and filters the items based on the provided keywords
        function searchZoteroCollection(keywords, allItems) {
          // Count the word frequency in the titles
          const wordFreqMap = {};
          allItems.forEach(item => {
            const itemTitle = item.data.title.toLowerCase();
            const words = itemTitle.split(/\s+/);
            words.forEach(word => {
              if (!["a", "an", "the"].includes(word)) {
                if (wordFreqMap[word]) {
                  wordFreqMap[word]++;
                } else {
                  wordFreqMap[word] = 1;
                }
              }
            });
          });

          // Sort the words by frequency (descending order)
          const sortedWords = Object.keys(wordFreqMap).sort((a, b) => wordFreqMap[b] - wordFreqMap[a]);

          // Display the 20 most frequent words in the keyword cloud
          const keywordCloudElement = document.getElementById("keyword-cloud");
          keywordCloudElement.innerHTML = "";
          const maxSize = 30;
          const minSize = 14;
          const maxCount = wordFreqMap[sortedWords[0]];
          const minCount = wordFreqMap[sortedWords[sortedWords.length - 1]];
          sortedWords.slice(0, 20).forEach((word, index) => {
            const count = wordFreqMap[word];
            const fontSize = ((count - minCount) / (maxCount - minCount)) * (maxSize - minSize) + minSize;
            const keywordElement = document.createElement("span");
            keywordElement.classList.add("keyword");
            keywordElement.style.fontSize = `${fontSize}px`;
            keywordElement.textContent = word;
            keywordCloudElement.appendChild(keywordElement);
          });

          // Filter the items based on the keywords in the titles
          let filteredItems = allItems;
          if (keywords.length > 0 && keywords[0].toLowerCase() !== "tout") {
            filteredItems = allItems.filter(item => {
              const itemTitle = item.data.title.toLowerCase();
              return keywords.some(keyword => itemTitle.includes(keyword.toLowerCase()));
            });
          }

          // Display the titles with hyperlinks of the filtered items
          const resultsElement = document.getElementById("results");
          resultsElement.innerHTML = "";

          if (filteredItems.length === 0) {
            resultsElement.textContent = "No results found.";
          } else {
            filteredItems.forEach(item => {
              const itemTitle = item.data.title;
              const itemURL = item.data.url;
              const linkElement = document.createElement("a");
              linkElement.href = itemURL;
              linkElement.textContent = itemTitle;
              linkElement.target = "_blank";
              resultsElement.appendChild(linkElement);
              resultsElement.appendChild(document.createElement("br"));
            });
          }
        }

        // Fetch all items in the Zotero collection
        function fetchAllItems(limit) {
          const apiKey = "yQraJQogHA89BHu3VJBKXLha";
          const collectionId = "TEJRE3BW";
          const apiUrl = `https://api.zotero.org/users/9668586/collections/${collectionId}/items?start=0&limit=${limit}&key=${apiKey}`;

          return fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
              if (data.length === limit) {
                return fetchAllItemsRecursive(apiKey, collectionId, data, limit);
              } else {
                return data;
              }
            })
            .catch(error => {
              console.error("Error:", error);
              return [];
            });
        }

        // Fetches the remaining items in the Zotero collection recursively
        function fetchAllItemsRecursive(apiKey, collectionId, items, start, limit) {
          const apiUrl = `https://api.zotero.org/users/9668586/collections/${collectionId}/items?start=${start}&limit=${limit}&key=${apiKey}`;

          return fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
              const allItems = items.concat(data);
              if (data.length === limit) {
                return fetchAllItemsRecursive(apiKey, collectionId, allItems, start + limit, limit);
              } else {
                return allItems;
              }
            })
            .catch(error => {
              console.error("Error:", error);
              return items;
            });
        }

        // Fetches the Zotero collection data and filters the items based on the provided keywords
        function searchZoteroCollection(keywords, allItems, limit) {
          // Filter the items based on the keywords in the titles
          let filteredItems = allItems;
          if (keywords.length > 0 && keywords[0].toLowerCase() !== "tout") {
            filteredItems = allItems.filter(item => {
              const itemTitle = item.data.title.toLowerCase();
              return keywords.some(keyword => itemTitle.includes(keyword.toLowerCase()));
            });
          }

          // Display the titles with hyperlinks of the filtered items
          const resultsElement = document.getElementById("results");
          resultsElement.innerHTML = "";

          const itemsPerPage = 20;
          const totalPages = Math.ceil(filteredItems.length / itemsPerPage);
          let currentPage = 1;

          // Display the results of the first page
          displayResults(currentPage, itemsPerPage, filteredItems, resultsElement);

          // Create the pagination
          createPagination(totalPages, currentPage, itemsPerPage, filteredItems, resultsElement);
        }

        function displayResults(page, itemsPerPage, filteredItems, resultsElement) {
          const startIndex = (page - 1) * itemsPerPage;
          const endIndex = startIndex + itemsPerPage;
          const currentPageResults = filteredItems.slice(startIndex, endIndex);

          currentPageResults.forEach(item => {
            const itemTitle = item.data.title;
            const itemURL = item.data.url;
            const linkElement = document.createElement("a");
            linkElement.href = itemURL;
            linkElement.textContent = itemTitle;
            linkElement.target = "_blank";
            resultsElement.appendChild(linkElement);
            resultsElement.appendChild(document.createElement("br"));
          });
        }

    

        // Fetch all items in the Zotero collection and display the initial keyword cloud
        const limit = 100; // Set the desired limit of results per page
        fetchAllItems(limit).then(data => searchZoteroCollection([], data, limit));

        // Function to handle keyword click event
        function handleKeywordClick(keyword) {
          // Set the keyword in the search bar
          document.getElementById("searchInput").value = keyword;

          // Trigger search button click event
          document.getElementById("search-button").click();
        }

        const initialKeywords = [
  "numériques",
  "humanités",
  "digit_hum",
  "sciences",
  "introduction",
  "recherche",
  "bibliothèques",
  "histoire",
  "sociales",
  "humaines",
  "tutoriel",
  "analyse",
  "atelier",
  "cours",
  "documentation",
  "ressources"
];

const keywordCloudElement = document.getElementById("keyword-cloud");
keywordCloudElement.innerHTML = "";

const maxSize = 30;
const minSize = 14;

// Sort the keywords in alphabetical order
initialKeywords.sort();

initialKeywords.forEach((keyword, index) => {
  // Randomly generate the count for demonstration purposes
  const count = Math.floor(Math.random() * 100);

  const fontSize = ((count - 1) / 99) * (maxSize - minSize) + minSize;

  const keywordElement = document.createElement("span");
  keywordElement.classList.add("keyword");
  keywordElement.style.fontSize = `${fontSize}px`;
  keywordElement.textContent = keyword;

  keywordElement.addEventListener("click", () => {
    handleKeywordClick(keyword);
  });

  keywordElement.addEventListener("mouseover", () => {
    keywordElement.classList.add("hover-effect");
  });

  keywordElement.addEventListener("mouseout", () => {
    keywordElement.classList.remove("hover-effect");
  });

  keywordCloudElement.appendChild(keywordElement);

  // Add a space after each keyword except the last one
  if (index !== initialKeywords.length - 1) {
    keywordCloudElement.appendChild(document.createTextNode(" "));
  }
});

function handleKeywordClick(keyword) {
  // Get the search input element
  const searchInput = document.getElementById("searchInput");

  // Set the search input value to the clicked keyword
  searchInput.value = keyword;

  // Perform the search
  searchItems(keyword);
}

function searchItems(keyword) {
  // Replace this with your own search logic
  const filteredItems = initialKeywords.filter(item => item.toLowerCase().includes(keyword.toLowerCase()));
  
  // Display the filtered items
  const resultsElement = document.getElementById("results");
  resultsElement.innerHTML = "";
  
  filteredItems.forEach(item => {
    const itemElement = document.createElement("li");
    itemElement.textContent = item;
    resultsElement.appendChild(itemElement);
  });
}



      

        var apiKey = 'yQraJQogHA89BHu3VJBKXLha';
        var userId = '9668586';
        var collectionId = 'TEJRE3BW';
        var limit1 = 10;
        var start = 0;
        var countItems = 0;

        async function zoteroGetTags(startValue) {
  let url = "https://en.wikipedia.org/w/api.php";
  try {
    var apiUrl = `https://api.zotero.org/users/${encodeURIComponent(userId)}/collections/${encodeURIComponent(collectionId)}/tags?format=json&limit=${limit}&start=${startValue}`;
    const response = await fetch(apiUrl, {
      headers: {
        'Zotero-API-Version': '3',
        'Zotero-API-Key': apiKey,
      },
    });
    const data = await response.json();
    
    var tagList = document.getElementById('tagList');
    var myItemList = document.getElementById('myItemList');
    
    var tagPromises = data.map(tag => {
      var tagName = tag.tag;
      var encodedTagName = encodeURIComponent(tagName);
      var tagLink = document.createElement('a');
      tagLink.textContent = tagName;
      tagLink.style.marginRight = '10px';
      tagLink.href = `javascript:void(0);`;
      tagLink.addEventListener('click', function () {
        // Appel à l'API Zotero pour récupérer les items associés à ce tag
        fetch(`https://api.zotero.org/users/${encodeURIComponent(userId)}/collections/${encodeURIComponent(collectionId)}/items?tag=${encodedTagName}&format=json`, {
          headers: {
            'Zotero-API-Version': '3',
            'Zotero-API-Key': apiKey,
          },
        })
          .then(response => response.json())
          .then(items => {
            // Effacer la liste des items précédents
            myItemList.innerHTML = '';

            // Afficher les nouveaux items dans la liste à puces
            items.forEach(item => {
              var itemElement = document.createElement('li');
              var itemLink = document.createElement('a');
              itemLink.textContent = item.data.title;
              itemLink.href = item.data.url;
              itemLink.target = '_blank'; // Ouvrir le lien dans un nouvel onglet
              itemElement.appendChild(itemLink);
              myItemList.appendChild(itemElement);
            });
          });
      });
      tagList.appendChild(tagLink);

      // Retourne une promesse résolue pour que Promise.all fonctionne correctement
      return Promise.resolve();
    });

    await Promise.all(tagPromises);

    tagList.style.height = `${tagList.scrollHeight}px`;


    if (data.length === limit) {
      return (startValue + limit);
    } else {
      return null;
    }
  } catch (error) {
    console.error('Une erreur s\'est produite lors de la récupération des tags de la collection Zotero:', error);
  }
}

        async function repeatedAPICall(apiCall, startValue) {
          const keys = [startValue];
          const result = [];
          data = null;

          for (const callKey of keys) {
            // console.log('callKey ', callKey);
            const data = await apiCall(callKey);
            // console.log('data ', data);
            // result.push(data);
            if (data !== undefined && data !== null) keys.push(data);
          }

          return result;
        }

        repeatedAPICall(zoteroGetTags, 0)
          .then(result => console.log(result)); // use your callbacks here


          var apiKey = 'yQraJQogHA89BHu3VJBKXLha';
        var userId = '9668586';
        var collectionId = 'TEJRE3BW';
        var limit1 = 10;
        var pageSize = 10;
        var start = 0;
        var count = 0;
        var currentPage = 0;
        var nbPages = 0;

        async function zoteroGetItems(startValue, searchQuery) {
            try {
                var apiUrl = `https://api.zotero.org/users/${encodeURIComponent(userId)}/collections/${encodeURIComponent(collectionId)}/items?format=json&limit=${pageSize}&start=${startValue}`;
                if (searchQuery !== '') {
                    apiUrl += `&q=${encodeURIComponent(searchQuery)}`;
                }
                console.log('searchQuery:', searchQuery, 'startValue:', startValue);
                const response = await fetch(apiUrl, {
                    headers: {
                        'Zotero-API-Version': '3',
                        'Zotero-API-Key': apiKey,
                    },
                });
                const data = await response.json();
                console.log('Count:', data.length);
                if (data.length == 0) {
                    return null;
                }
                nbPages++;
                console.log('Retrieved items:', data); // Check the retrieved items in the browser console

                var myItemList1 = document.getElementById('myItemList1');
                
                count = 0;
                data.forEach(item => {
                    var itemElement = document.createElement('li');
                    if (currentPage != nbPages) {
                        itemElement.style.display = 'none';
                    }
                    itemElement.classList.add(`page${nbPages}`);
                    var itemLink = document.createElement('a');
                    itemLink.textContent = item.data.title;
                    itemLink.href = item.data.url;
                    itemLink.target = '_blank';
                    itemElement.appendChild(itemLink);
                    myItemList1.appendChild(itemElement);
                    count++;
                });

                myItemList1.style.height = `${myItemList1.scrollHeight}px`;

                
                if (count == pageSize) {
                    console.log('count == pageSize');
                    return (startValue+count);
                }
                else {
                    // console.log('count != limit');
                    return null;
                }
            } catch (error) {
                console.error('An error occurred while retrieving items from the Zotero collection:', error);
            }
        }

        function searchItems() {
            var searchQuery = document.getElementById('searchInput').value;
            var myItemList1 = document.getElementById('myItemList1');
            myItemList1.innerHTML = '';
            nbPages = 0;
            currentPage = 1;
            repeatedAPICall(startValue => zoteroGetItems(startValue, searchQuery), 0)
                .then(result => console.log(result)); // use your callbacks here
            document.getElementById('currentPage').textContent = currentPage;
        }

        function updatePage(action) {
            if (action === 'previous') {
                if (currentPage > 1) {
                    eltCurrentPage = document.getElementsByClassName(`page${currentPage}`);
                    for (var i = 0; i < eltCurrentPage.length; i++) {
                        eltCurrentPage[i].style.display = 'none';
                    }
                    eltPreviousPage = document.getElementsByClassName(`page${currentPage-1}`);
                    for (var i = 0; i < eltPreviousPage.length; i++) {
                        eltPreviousPage[i].style.display = 'block';
                    }
                    currentPage--;
                    document.getElementById('currentPage').textContent = currentPage;
                }
            } else if (action === 'next') {
                if (currentPage < nbPages) {
                    eltCurrentPage = document.getElementsByClassName(`page${currentPage}`);
                    for (var i = 0; i < eltCurrentPage.length; i++) {
                        eltCurrentPage[i].style.display = 'none';
                    }
                    eltNextPage = document.getElementsByClassName(`page${currentPage+1}`);
                    for (var i = 0; i < eltNextPage.length; i++) {
                        eltNextPage[i].style.display = 'block';
                    }
                    currentPage++;
                    document.getElementById('currentPage').textContent = currentPage;
                }
            }
        }

        async function repeatedAPICall(
            apiCall,
            startValue
        ) {
            const keys = [startValue];
            const result = [];
            data = null;

            for (const callKey of keys) {
                console.log('callKey ', callKey);
                const data = await apiCall(callKey);
                console.log('data ', data);
                // result.push(data);
                if (data !== undefined && data !== null) keys.push(data);
            }

            return result;
        }

function openPopup(title, url) {
  if (currentPopup) {
    document.body.removeChild(currentPopup); // Remove the current popup if it exists
  }

  var popupContent = document.createElement('div');
  popupContent.innerHTML = `<h2>${title}</h2><p>URL: <a href="${url}" target="_blank">${url}</a></p>`;

  var popupWindow = document.createElement('div');
  popupWindow.classList.add('popup');
  popupWindow.appendChild(popupContent);

  document.body.appendChild(popupWindow);

  currentPopup = popupWindow;

  popupWindow.addEventListener('click', function (event) {
    if (event.target === popupWindow) {
      document.body.removeChild(popupWindow); // Remove the popup when clicked outside the content
      currentPopup = null;
    }
  });
}





      </script>
</body>

</html>